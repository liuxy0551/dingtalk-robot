var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,i=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&s(e,a,t[a]);return e},d=(e,n)=>t(e,a(n));import{n as r,o as c,m as p,t as u,D as b,r as g,c as y,d as m,F as f,q as I,w as v,p as j,a as S,b as h,v as k,s as C,e as w}from"./vendor.e2c80a0b.js";import{a as O}from"./index.e2b7bb89.js";const M={setup(){const e=localStorage.getItem("senderId"),t=r({tabSelected:"gupiao",tabList:[{label:"股票",value:"gupiao"},{label:"基金",value:"jijin"}],result:{jijin:[],gupiao:[]}});c((()=>{a()}));const a=()=>{p.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner"}),O.post("/api/getMoneyInfos",{senderId:e}).then((e=>{const{jijin:a,gupiao:n}=e.data;localStorage.setItem("moneyInfoCodes",a.concat(n).map((e=>e.code)).join(",")),t.result={jijin:a.map((e=>d(i({},e),{loading:!1}))),gupiao:n.map((e=>d(i({},e),{loading:!1})))}})).finally((()=>{p.clear()}))};return d(i({},u(t)),{onChange:e=>{t.tabSelected=e},sortMoneyInfo:(e,n)=>{t.result[t.tabSelected][e].loading=!0,t.result[t.tabSelected][e+("up"===n?-1:1)].loading=!0;const o=t.result[t.tabSelected][e],l=t.result[t.tabSelected][e+("up"===n?-1:1)],s={current:{moneyInfoId:o.moneyInfoId,sort:e+1+("up"===n?-1:1)},target:{moneyInfoId:l.moneyInfoId,sort:e+1}};O.post("/api/sortMoneyInfo",s).then((()=>{a(),p("调整成功")})).finally((()=>{t.result[t.tabSelected][e].loading=!1,t.result[t.tabSelected][e+("up"===n?-1:1)].loading=!1}))},deleteMoneyInfo:t=>{t.loading=!0,b.confirm({title:"删除自选",message:"确认删除该自选理财信息吗？"}).then((()=>{const n={senderId:e,code:t.code};O.post("/api/deleteMoneyInfo",n).then((()=>{a(),p("删除成功")})).finally((()=>{t.loading=!1}))})).catch((()=>{t.loading=!1}))}})}},x=v();j("data-v-8a32dc4c");const P={class:"personal-content"},_={class:"top-search"},z={key:0,class:"box top-tab"},V={class:"row"},D={class:"text"},L=w("删除"),q={key:1,class:"box top-tab"};S();const E=x(((e,t,a,n,o,l)=>{const s=g("van-tab"),i=g("van-tabs"),d=g("van-button"),r=g("van-empty");return h(),y("div",P,[m("div",_,[m(i,{modelValue:e.tabSelected,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tabSelected=t),onChange:n.onChange},{default:x((()=>[(h(!0),y(f,null,I(e.tabList,(e=>(h(),y(s,{key:e.value,title:e.label,name:e.value},null,8,["title","name"])))),128))])),_:1},8,["modelValue","onChange"])]),e.result[e.tabSelected]&&e.result[e.tabSelected].length?(h(),y("div",z,[(h(!0),y(f,null,I(e.result[e.tabSelected],((t,a)=>(h(),y("div",{class:"item",key:t.code},[m("div",V,[m("div",D,k(t.code)+" - "+k(t.name),1),0!==a?(h(),y(d,{key:0,class:"sort-btn up",icon:"down",size:"mini",loading:t.loading,type:"primary",onClick:e=>n.sortMoneyInfo(a,"up")},null,8,["loading","onClick"])):C("",!0),a!==e.result[e.tabSelected].length-1?(h(),y(d,{key:1,class:"sort-btn",icon:"down",size:"mini",loading:t.loading,type:"primary",onClick:e=>n.sortMoneyInfo(a,"down")},null,8,["loading","onClick"])):C("",!0),m(d,{class:"delete-btn",type:"warning",size:"mini",loading:t.loading,onClick:e=>n.deleteMoneyInfo(t)},{default:x((()=>[L])),_:2},1032,["loading","onClick"])])])))),128))])):(h(),y("div",q,[m(r,{description:"暂无数据"})]))])}));M.render=E,M.__scopeId="data-v-8a32dc4c";export default M;
